<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIMIT | Spending Guardrails</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=JetBrains+Mono:wght@500;800&display=swap');

        :root {
            --success: #10b981;
            --danger: #ef4444;
            --gold: #f59e0b;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #010103;
            color: #f4f4f5;
            margin: 0;
            overflow: hidden;
        }

        .text-gradient-purple {
            background: linear-gradient(to bottom, #a78bfa, #7c3aed);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .nebula-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
        }

        .glass-card {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .btn-primary {
            background: #ffffff;
            color: #000000;
            font-weight: 900;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .custom-scroll::-webkit-scrollbar { width: 4px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #27272a; border-radius: 10px; }

        .pulse-soft { animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }

        .scan-line {
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.2), transparent);
            animation: scan 3s linear infinite;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }

        .ticker-move { animation: ticker 30s linear infinite; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }

        .reveal { opacity: 0; transform: translateY(30px); transition: all 1s ease; }
        .reveal.active { opacity: 1; transform: translateY(0); }

        .zk-wire { stroke-dasharray: 10; animation: flow 2s linear infinite; }
        @keyframes flow { to { stroke-dashoffset: -20; } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- WRAPPER FOR LUCIDE ---
        const Icon = ({ name, size = 18, className = "" }) => {
            const iconName = name.charAt(0).toUpperCase() + name.slice(1).replace(/-([a-z])/g, g => g[1].toUpperCase());
            // Map common names to Lucide key names if necessary
            const LucideIcon = lucide.icons[iconName] || lucide.icons.Shield;
            
            // Create the SVG string and inject it
            const [svgContent, setSvgContent] = useState('');
            
            useEffect(() => {
                const icon = lucide.createIcons({
                    icons: { [iconName]: LucideIcon },
                    attrs: { class: className, width: size, height: size }
                });
            }, [name, size, className]);

            return <i data-lucide={name} className={className} style={{width: size, height: size, display: 'inline-block'}}></i>;
        };

        // --- DATA ---
        const INITIAL_LOGS = [
            { id: 1, text: "Identity Matrix Established", time: "2h ago", type: "success" },
            { id: 2, text: "Privacy Shield v2.1 Verified", time: "5h ago", type: "neutral" },
            { id: 3, text: "Spending Rule #04 Active", time: "8h ago", type: "success" }
        ];

        const MARKET_DATA = [
            { label: 'ETH/USD', val: '$2,421', change: '+1.2%' },
            { label: 'GAS', val: '12 Gwei', change: 'LOW' },
            { label: 'SAVINGS_AVG', val: '$42/DAY', change: 'STABLE' }
        ];

        const SBT_ARCHIVE = [
            { id: 'SBT-01', name: 'Iron Will', tier: 'Soulbound', color: 'from-purple-600 to-blue-600', desc: 'Maintained <$500 budget for 12 months straight.' },
            { id: 'SBT-02', name: 'The Anchor', tier: 'Soulbound', color: 'from-cyan-600 to-emerald-600', desc: 'Secured 10+ ETH from impulsive market buys.' },
            { id: 'SBT-03', name: 'V1 Architect', tier: 'Soulbound', color: 'from-fuchsia-600 to-rose-600', desc: 'Protocol founding member identity seal.' }
        ];

        // --- COMPONENTS ---

        const CustomCursor = () => {
            const cursorRef = useRef(null);
            const [isPointer, setIsPointer] = useState(false);
            useEffect(() => {
                const move = (e) => {
                    if (cursorRef.current) {
                        cursorRef.current.style.transform = `translate3d(${e.clientX}px, ${e.clientY}px, 0)`;
                    }
                    const target = e.target;
                    const style = window.getComputedStyle(target);
                    setIsPointer(style.cursor === 'pointer' || target.closest('button') || target.closest('a'));
                };
                window.addEventListener('mousemove', move);
                return () => window.removeEventListener('mousemove', move);
            }, []);
            return (
                <div ref={cursorRef} className="fixed top-0 left-0 pointer-events-none z-[10000] mix-blend-difference -translate-x-1/2 -translate-y-1/2">
                    <div className={`rounded-full bg-white transition-all duration-300 ${isPointer ? 'w-10 h-10 opacity-20' : 'w-2 h-2 opacity-100'}`} />
                </div>
            );
        };

        const DashboardView = ({ stats, logs, onNavigate }) => (
            <div className="space-y-5">
                <div className="text-left">
                    <h1 className="text-2xl font-black text-white tracking-tight uppercase">Shield Deck</h1>
                    <p className="text-zinc-500 text-xs mt-1">Institutional limits applied to your personal ledger.</p>
                </div>
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-5">
                    <div className="lg:col-span-2 nebula-card p-6 min-h-[250px] flex flex-col justify-between shadow-2xl relative overflow-hidden text-left">
                        <div className="absolute top-0 right-0 p-6 opacity-5"><Icon name="shield" size={140}/></div>
                        <div>
                            <p className="text-[9px] font-black text-purple-400 uppercase tracking-widest mb-3">Guarded Portfolio</p>
                            <h2 className="text-5xl font-black text-white tracking-tighter leading-none">{stats.tvl.toFixed(2)} <span className="text-lg text-zinc-600 font-mono tracking-normal uppercase">ETH</span></h2>
                        </div>
                        <div className="flex justify-between pt-6 border-t border-white/5">
                            <div><p className="text-zinc-600 text-[8px] font-black uppercase mb-1">Valuation</p><p className="text-lg font-black text-white">${(stats.tvl * 2421).toLocaleString()}</p></div>
                            <div className="text-right"><p className="text-zinc-600 text-[8px] font-black uppercase mb-1">Lock Status</p><p className="text-lg text-emerald-500 font-black uppercase">Active</p></div>
                        </div>
                    </div>
                    <button onClick={() => onNavigate('ritual')} className="nebula-card p-6 border-dashed border-zinc-800 hover:bg-purple-500/[0.02] flex flex-col items-center justify-center text-center group transition-all">
                        <div className="w-10 h-10 rounded-xl bg-purple-500/10 flex items-center justify-center text-purple-400 mb-3 group-hover:scale-110 transition-all"><Icon name="plus" size={20}/></div>
                        <h3 className="text-sm font-black text-white uppercase tracking-widest">Add Constraint</h3>
                    </button>
                </div>
            </div>
        );

        const LandingPage = ({ onStartSignup }) => {
            const ScrollSection = ({ children, className = "" }) => {
                const [isVisible, setIsVisible] = useState(false);
                const ref = useRef();
                useEffect(() => {
                    const observer = new IntersectionObserver(([entry]) => setIsVisible(entry.isIntersecting), { threshold: 0.15 });
                    if(ref.current) observer.observe(ref.current);
                    return () => observer.disconnect();
                }, []);
                return <section ref={ref} className={`min-h-screen flex flex-col justify-center items-center px-6 relative reveal ${isVisible?'active':''} ${className}`}>{children}</section>;
            };

            return (
                <div className="bg-[#010103] h-screen overflow-y-auto custom-scroll relative">
                    <ScrollSection className="text-center pt-10">
                        <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,_rgba(139,92,246,0.06)_0%,_transparent_70%)] pointer-events-none" />
                        <div className="text-purple-500 mb-8 pulse-soft"><Icon name="hexagon" size={120} /></div>
                        <h1 className="text-8xl md:text-[11vw] font-black leading-none tracking-tighter mb-8 bg-clip-text text-transparent bg-gradient-to-b from-white to-zinc-900 uppercase">LIMIT</h1>
                        <p className="text-zinc-500 uppercase tracking-[2em] text-[10px] font-black opacity-60 ml-8 text-center leading-none">Spending Guardrails</p>
                        <div className="mt-40 flex flex-col items-center gap-4 animate-bounce opacity-40">
                            <p className="text-[8px] font-black uppercase tracking-widest">Scroll Down</p>
                            <Icon name="chevrons-down" size={20}/>
                        </div>
                    </ScrollSection>

                    <ScrollSection className="bg-black border-t border-white/5 text-center">
                        <div className="max-w-4xl space-y-12">
                            <div className="text-yellow-500 font-black text-[10px] uppercase tracking-[0.5em] mb-4">03 THE REWARD</div>
                            <h2 className="text-6xl md:text-7xl font-black text-white tracking-tighter leading-none uppercase">Ascend.</h2>
                            <p className="text-zinc-500 text-2xl font-semibold leading-relaxed max-w-4xl mx-auto opacity-90 tracking-tight">Completing a cycle mints Soulbound Tokensâ€”permanent trophies that unlock community yields.</p>
                            <button onClick={onStartSignup} className="px-24 py-9 bg-white text-black font-black uppercase tracking-[0.5em] text-xs rounded-full hover:shadow-[0_0_120px_rgba(255,255,255,0.3)] hover:scale-105 transition-all shadow-2xl">Establish Presence</button>
                        </div>
                    </ScrollSection>
                </div>
            );
        };

        const MainApp = () => {
            const [view, setView] = useState('landing');
            const [activeTab, setActiveTab] = useState('dashboard');
            const [stats, setStats] = useState({ tvl: 14.42, score: 94.2 });
            const [logs, setLogs] = useState(INITIAL_LOGS);

            useEffect(() => {
                // Initialize Lucide icons whenever the view changes
                lucide.createIcons();
            }, [view, activeTab]);

            return (
                <div className="limit-app min-h-screen bg-[#010103] text-zinc-100 selection:bg-purple-500/40 overflow-hidden">
                    <CustomCursor />
                    
                    {view === 'landing' && <LandingPage onStartSignup={() => setView('app')} />}
                    
                    {view === 'app' && (
                        <div className="h-screen flex overflow-hidden">
                            <aside className="w-[100px] lg:w-[120px] border-r border-white/5 flex flex-col bg-[#050507] z-50 items-center py-12 gap-12 shrink-0">
                                <button className="text-purple-400 hover:scale-110 transition-transform" onClick={() => setActiveTab('dashboard')}>
                                    <Icon name="hexagon" size={40} />
                                </button>
                                <nav className="flex-1 space-y-10 flex flex-col items-center">
                                    <button onClick={() => setActiveTab('dashboard')} className={`p-5 rounded-3xl transition-all ${activeTab === 'dashboard' ? 'bg-purple-500 text-white shadow-lg' : 'text-zinc-600'}`}>
                                        <Icon name="activity" size={28}/>
                                    </button>
                                    <button onClick={() => setActiveTab('vault')} className={`p-5 rounded-3xl transition-all ${activeTab === 'vault' ? 'bg-purple-500 text-white shadow-lg' : 'text-zinc-600'}`}>
                                        <Icon name="shield" size={28}/>
                                    </button>
                                </nav>
                            </aside>

                            <main className="flex-1 flex flex-col bg-[#030005] relative overflow-hidden">
                                <header className="h-28 border-b border-white/5 flex items-center justify-between px-16 bg-black/60 backdrop-blur-3xl shrink-0">
                                    <div className="flex gap-16 items-center text-[10px] font-black uppercase tracking-[0.4em] text-zinc-600">
                                        <div className="flex items-center gap-5">
                                            <span className="w-2 h-2 rounded-full bg-purple-500 animate-pulse shadow-[0_0_15px_#8b5cf6]" />
                                            NODE <span className="text-white font-mono font-black text-sm">#19,402,111</span>
                                        </div>
                                    </div>
                                    <button className="p-4 nebula-card rounded-2xl relative">
                                        <Icon name="bell" size={20} className="text-zinc-500" />
                                        <div className="absolute top-3.5 right-3.5 w-2 h-2 bg-purple-500 rounded-full" />
                                    </button>
                                </header>

                                <div className="flex-1 overflow-y-auto p-16 lg:p-24 custom-scroll">
                                    {activeTab === 'dashboard' && <DashboardView stats={stats} logs={logs} onNavigate={setActiveTab} />}
                                    {activeTab === 'vault' && (
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                            {SBT_ARCHIVE.map(n => (
                                                <div key={n.id} className="nebula-card p-4 text-left">
                                                    <div className={`w-full aspect-square rounded-2xl bg-gradient-to-br ${n.color} p-6 flex flex-col justify-between`}>
                                                        <span className="text-[10px] font-black uppercase text-white/50">{n.tier}</span>
                                                        <h3 className="text-xl font-black text-white uppercase">{n.name}</h3>
                                                    </div>
                                                    <p className="mt-4 text-zinc-500 text-xs font-bold leading-snug">{n.desc}</p>
                                                </div>
                                            ))}
                                        </div>
                                    )}
                                </div>
                            </main>
                        </div>
                    )}
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MainApp />);
    </script>
</body>
</html>
